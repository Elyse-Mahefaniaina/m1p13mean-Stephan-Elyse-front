<!-- ========== HERO SECTION ========== -->
<header class="premium-hero">
    <!-- Decorative Blurred Circles -->
    <div class="hero-circle hero-circle-1"></div>
    <div class="hero-circle hero-circle-2"></div>

    <div class="container position-relative" style="z-index: 1;">
        <div class="row align-items-center">
            <div class="col-lg-7 text-center text-lg-start animate-slide-up">
                <span class="section-tag">Bienvenue chez vous</span>
                <h1 class="hero-title">
                    Le shopping réinventé avec <span class="text-gradient">Élégance</span>.
                </h1>
                <p class="lead mb-5 text-muted hero-subtitle">
                    Explorez une vaste sélection de produits de haute qualité provenant
                    des meilleures boutiques locales et internationales.
                </p>
                <div class="d-flex gap-3 justify-content-center justify-content-lg-start">
                    <a routerLink="/client/catalog"
                        class="btn btn-primary btn-lg px-5 py-3 rounded-pill shadow hero-cta">
                        Acheter Maintenant
                    </a>
                    <a href="#popular" class="btn btn-outline-dark btn-lg px-5 py-3 rounded-pill hero-cta-secondary">
                        Voir les Tendances
                    </a>
                </div>
            </div>
            <div class="col-lg-5 d-none d-lg-flex justify-content-center align-items-center">
                <div class="hero-image-wrapper">
                    <img [src]="heroImageUrl" alt="Luxury Shopping" class="img-fluid rounded-5 shadow-lg hero-main-img">
                </div>
            </div>
        </div>
    </div>
</header>

<div class="container">

    <!-- ========== FEATURED COLLECTIONS ========== -->
    <section class="row g-4 mb-5 pb-5 animate-on-scroll">
        <!-- Main Featured Card -->
        <div class="col-lg-7">
            <div class="featured-card featured-card-tech p-5 h-100 position-relative overflow-hidden"
                [style.background-image]="'linear-gradient(rgba(30, 27, 75, 0.8), rgba(49, 46, 129, 0.8)), url(' + techBannerUrl + ')'"
                style="background-size: cover; background-position: center;">
                <div class="position-relative" style="z-index: 1;">
                    <span class="badge bg-primary mb-3 px-3 py-2 rounded-pill fw-semibold">Édition Limitée</span>
                    <h2 class="display-5 fw-bold mb-3 text-white">
                        La Tech de <br>Demain
                    </h2>
                    <p class="lead opacity-75 mb-5 text-white" style="max-width: 75%;">
                        Une sélection exclusive des gadgets les plus innovants du moment.
                    </p>
                    <a routerLink="/client/catalog" [queryParams]="{category: 'Électronique'}"
                        class="btn btn-light rounded-pill px-5 py-3 fw-bold text-primary shadow-lg">
                        Voir la Sélection
                    </a>
                </div>
            </div>
        </div>

        <!-- Side Featured Cards -->
        <div class="col-lg-5">
            <div class="d-flex flex-column gap-4 h-100">
                <div class="featured-card-sm p-4 flex-grow-1 d-flex flex-column justify-content-center text-white"
                    [style.background-image]="'linear-gradient(rgba(190, 24, 93, 0.7), rgba(190, 24, 93, 0.7)), url(' + beautyBannerUrl + ')'"
                    style="background-size: cover; background-position: center; border-radius: 2rem;">
                    <h3 class="fw-bold mb-2">Beauté & Soins</h3>
                    <p class="mb-4 opacity-75">Prenez soin de vous au quotidien.</p>
                    <a routerLink="/client/catalog" [queryParams]="{category: 'Beauté'}"
                        class="btn btn-link text-decoration-none p-0 fw-bold text-white">
                        Explorer l'univers <i class="bi bi-chevron-right ms-2"></i>
                    </a>
                </div>
                <div class="featured-card-sm p-4 flex-grow-1 d-flex flex-column justify-content-center text-white"
                    [style.background-image]="'linear-gradient(rgba(6, 95, 70, 0.7), rgba(6, 95, 70, 0.7)), url(' + homeDecorBannerUrl + ')'"
                    style="background-size: cover; background-position: center; border-radius: 2rem;">
                    <h3 class="fw-bold mb-2">Maison & Déco</h3>
                    <p class="mb-4 opacity-75">Le design s'invite chez vous.</p>
                    <a routerLink="/client/catalog" [queryParams]="{category: 'Maison'}"
                        class="btn btn-link text-decoration-none p-0 fw-bold text-white">
                        Explorer l'univers <i class="bi bi-chevron-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== CATEGORIES SECTION ========== -->
    <section class="mb-5 pb-5">
        <div class="text-center mb-5">
            <span class="section-tag">Explorez nos univers</span>
            <h2 class="display-5 fw-bold section-title">Par Catégorie</h2>
        </div>
        <div class="row g-4">
            @for (category of categories(); track category.slug) {
            <div class="col-md-6 col-lg-3">
                <a routerLink="/client/catalog" [queryParams]="{category: category.name}"
                    class="cat-card-modern shadow-sm">
                    <div class="cat-icon-container">
                        <i class="bi {{ category.icon }}"></i>
                    </div>
                    <h5 class="fw-bold mb-0">{{ category.name }}</h5>
                    <p class="text-muted small mb-0">Découvrir l'univers</p>
                </a>
            </div>
            }
        </div>
    </section>

    <!-- ========== POPULAR PRODUCTS ========== -->
    <section class="mb-5 pb-5" id="popular">
        <div class="d-flex justify-content-between align-items-end mb-5">
            <div>
                <span class="section-tag">Les incontournables</span>
                <h2 class="display-6 fw-bold mb-0 section-title">Produits Populaires</h2>
            </div>
            <a routerLink="/client/catalog" class="btn btn-link text-primary fw-bold text-decoration-none see-all-link">
                Tout Voir <i class="bi bi-arrow-right ms-2"></i>
            </a>
        </div>
        <div class="row g-4">
            @for (product of popularProducts(); track product.id) {
            <div class="col-md-6 col-lg-3">
                <div class="catalog-product-card card h-100 border-0 overflow-hidden">
                    <!-- Image -->
                    <div class="catalog-img-container position-relative" [routerLink]="['/client/product', product.id]"
                        style="cursor: pointer;">
                        <img [src]="product.image" [alt]="product.name" class="catalog-product-img">
                        @if (getDiscount(product) > 0) {
                        <span class="discount-badge">-{{ getDiscount(product) }}%</span>
                        }
                        <button class="wishlist-btn" [class.active]="product.isWishlisted"
                            (click)="toggleWishlist(product, $event)">
                            <i class="bi" [class.bi-heart-fill]="product.isWishlisted"
                                [class.bi-heart]="!product.isWishlisted"></i>
                        </button>
                    </div>
                    <!-- Info -->
                    <div class="card-body p-4 d-flex flex-column">
                        <h3 class="h6 fw-bold mb-2 catalog-product-name">
                            <a [routerLink]="['/client/product', product.id]" class="text-decoration-none text-dark">{{
                                product.name
                                }}</a>
                        </h3>
                        <div class="d-flex align-items-center gap-2 mb-3">
                            <div class="d-flex gap-0">
                                @for (filled of getStars(product.rating); track $index) {
                                <i class="bi star-icon" [class.bi-star-fill]="filled" [class.bi-star]="!filled"
                                    [class.text-warning]="filled" [class.text-muted]="!filled">
                                </i>
                                }
                            </div>
                            <span class="text-muted review-count">({{ product.reviews }})</span>
                        </div>
                        <div class="mt-auto d-flex justify-content-between align-items-center">
                            <div>
                                <span class="fw-bold text-primary fs-5">{{ formatPrice(product.price) }}</span>
                                @if (product.originalPrice) {
                                <span class="text-muted text-decoration-line-through small ms-2">
                                    {{ formatPrice(product.originalPrice) }}
                                </span>
                                }
                            </div>
                            <button
                                class="btn btn-primary btn-sm rounded-circle catalog-cart-btn d-flex align-items-center justify-content-center"
                                (click)="addToCart(product, $event)" title="Ajouter au panier">
                                <i class="bi bi-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            }
        </div>
    </section>

</div>