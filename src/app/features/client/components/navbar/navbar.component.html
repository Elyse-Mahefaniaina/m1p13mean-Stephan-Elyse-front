<!-- Premium Glassmorphism Navbar -->
<nav class="navbar navbar-expand-lg sticky-top py-3" [class.navbar-scrolled]="isScrolled()">
    <div class="container">
        <!-- Brand -->
        <a class="navbar-brand d-flex align-items-center gap-2" routerLink="/client">
            <i class="bi bi-bag-fill fs-3 text-primary"></i>
            <span class="fs-4 fw-bold brand-text">MEAN</span>
        </a>

        <!-- Mobile Toggle -->
        <button class="navbar-toggler border-0 shadow-none" type="button" (click)="toggleMobileMenu()"
            [attr.aria-expanded]="isMobileMenuOpen()">
            <i class="bi" [class.bi-list]="!isMobileMenuOpen()" [class.bi-x-lg]="isMobileMenuOpen()"></i>
        </button>

        <!-- Navbar Content -->
        <div class="navbar-collapse" [class.collapse]="!isMobileMenuOpen()" [class.show]="isMobileMenuOpen()">

            <!-- Main Nav -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                <li class="nav-item">
                    <a class="nav-link fw-semibold px-3" routerLink="/client" routerLinkActive="active"
                        [routerLinkActiveOptions]="{exact: true}">Accueil</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold px-3" routerLink="/client/catalog"
                        routerLinkActive="active">Catalogue</a>
                </li>
            </ul>
            <!-- Search Bar -->
            <div class="mx-auto my-3 my-lg-0 w-100 px-lg-4 search-wrapper">
                <div class="position-relative">
                    <input type="text" class="form-control search-input rounded-pill border-0 px-4 py-2"
                        id="clientSearchInput" placeholder="Que recherchez-vous aujourd'hui ?" #searchInput
                        (keypress)="onSearch($event, searchInput.value)">
                    <i class="bi bi-search position-absolute end-0 top-50 translate-middle-y me-3 text-muted"></i>
                </div>
            </div>

            <!-- Action Icons -->
            <div class="d-flex align-items-center gap-3 nav-actions">
                <!-- Wishlist -->
                <a routerLink="/client/wishlist" class="btn btn-link text-dark p-0 position-relative nav-icon-btn"
                    routerLinkActive="active" title="Liste de souhaits">
                    <i class="bi bi-heart fs-5"></i>
                </a>
                <!-- Cart -->
                <a routerLink="/client/cart" class="btn btn-link text-dark p-0 position-relative nav-icon-btn"
                    title="Panier">
                    <i class="bi bi-cart3 fs-5"></i>
                    @if (cartItemCount() > 0) {
                    <span
                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary cart-badge">
                        {{ cartItemCount() }}
                    </span>
                    }
                </a>
                <!-- Auth Section -->
                @if (!isLoggedIn()) {
                <a routerLink="/client/login" class="btn btn-dark rounded-pill px-4 fw-semibold login-btn">
                    Se connecter
                </a>
                } @else {
                <div class="dropdown">
                    <button class="btn btn-dark rounded-pill px-4 fw-semibold login-btn" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Mon Compte
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end border-0 shadow-lg p-2 rounded-4 dropdown-premium">
                        <li>
                            <a class="dropdown-item rounded-3 py-2 px-3" routerLink="/client/profile">
                                <i class="bi bi-person-circle me-2"></i>Mon Profil
                            </a>
                        </li>
                        <li>
                            <a class="dropdown-item rounded-3 py-2 px-3" routerLink="/client/orders">
                                <i class="bi bi-box-seam me-2"></i>Mes Commandes
                            </a>
                        </li>
                        <li>
                            <hr class="dropdown-divider mx-2">
                        </li>
                        <li>
                            <button class="dropdown-item rounded-3 py-2 px-3 text-danger" (click)="logout()">
                                <i class="bi bi-power me-2"></i>DÃ©connexion
                            </button>
                        </li>
                    </ul>
                </div>
                }
            </div>
        </div>
    </div>
</nav>