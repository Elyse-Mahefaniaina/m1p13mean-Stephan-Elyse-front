<div class="product-card card h-100 border-0 overflow-hidden">
    <!-- Image -->
    <div class="product-img-container position-relative" [routerLink]="['/client/product', product.id]"
        style="cursor: pointer;">
        <img [src]="product.image" [alt]="product.name" class="product-img">
        @if (getDiscount(product) > 0) {
        <span class="discount-badge">-{{ getDiscount(product) }}%</span>
        }
        <button class="wishlist-btn" [class.active]="product.isWishlisted" (click)="onToggleWishlist($event)">
            <i class="bi" [class.bi-heart-fill]="product.isWishlisted" [class.bi-heart]="!product.isWishlisted"></i>
        </button>
    </div>
    <!-- Info -->
    <div class="card-body p-4 d-flex flex-column">
        <h3 class="h6 fw-bold mb-2 product-name">
            <a [routerLink]="['/client/product', product.id]">{{ product.name }}</a>
        </h3>
        <div class="d-flex align-items-center gap-2 mb-3">
            <div class="d-flex gap-0">
                @for (filled of getStars(product.rating); track $index) {
                <i class="bi star-icon" [class.bi-star-fill]="filled" [class.bi-star]="!filled"
                    [class.text-warning]="filled" [class.text-muted]="!filled">
                </i>
                }
            </div>
            <span class="text-muted review-count">({{ product.reviews }})</span>
        </div>
        <div class="mt-auto d-flex justify-content-between align-items-center">
            <div>
                <span class="fw-bold text-primary fs-5">{{ formatPrice(product.price) }}</span>
                @if (product.originalPrice) {
                <span class="text-muted text-decoration-line-through small ms-2">
                    {{ formatPrice(product.originalPrice) }}
                </span>
                }
            </div>
            <button class="cart-btn shadow-sm" (click)="onAddToCart($event)" title="Ajouter au panier">
                <i class="bi bi-cart-plus"></i>
            </button>
        </div>
    </div>
</div>