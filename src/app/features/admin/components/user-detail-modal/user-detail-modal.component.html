<!-- User Detail Modal -->
<div class="modal fade" #detailModal tabindex="-1" aria-labelledby="userDetailLabel" aria-hidden="true"
    id="userDetailModal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 rounded-4 shadow-lg overflow-hidden">

            @if (user) {

            <!-- Profile Header -->
            <div class="detail-header" [ngClass]="'detail-header-' + getRoleColor(user.role)">
                <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3"
                    (click)="close()" aria-label="Fermer"></button>

                <div class="d-flex flex-column align-items-center pt-4 pb-4">
                    <div class="detail-avatar d-flex align-items-center justify-content-center mb-3"
                        [ngClass]="'avatar-' + getRoleColor(user.role)">
                        {{ user.name.charAt(0) }}
                    </div>
                    <h5 class="fw-bold text-white mb-1">{{ user.name }}</h5>
                    <span class="text-white-50 small">{{ user.email }}</span>

                    <div class="d-flex gap-2 mt-3">
                        <span class="detail-badge-role">
                            <i class="bi {{ getRoleIcon(user.role) }} me-1"></i>
                            {{ getRoleLabel(user.role) }}
                        </span>
                        <span class="detail-badge-status" [ngClass]="'status-' + getStatusColor(user.status)">
                            <span class="status-indicator"></span>
                            {{ getStatusLabel(user.status) }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Info Section -->
            <div class="modal-body px-4 py-4">

                <!-- Info Grid -->
                <div class="info-grid">

                    <!-- ID -->
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="bi bi-fingerprint"></i>
                        </div>
                        <div>
                            <div class="info-label">Identifiant</div>
                            <div class="info-value font-monospace" style="font-size: 0.82rem;">{{ user.id }}</div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="bi bi-envelope-fill"></i>
                        </div>
                        <div>
                            <div class="info-label">Adresse email</div>
                            <div class="info-value">{{ user.email }}</div>
                        </div>
                    </div>

                    <!-- Role -->
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="bi {{ getRoleIcon(user.role) }}"></i>
                        </div>
                        <div>
                            <div class="info-label">Rôle attribué</div>
                            <div class="info-value">{{ getRoleLabel(user.role) }}</div>
                        </div>
                    </div>

                    <!-- Status -->
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="bi bi-toggle2-on"></i>
                        </div>
                        <div>
                            <div class="info-label">Statut du compte</div>
                            <div class="info-value d-flex align-items-center gap-2">
                                <span class="status-dot-inline" [ngClass]="'dot-' + getStatusColor(user.status)"></span>
                                {{ getStatusLabel(user.status) }}
                            </div>
                        </div>
                    </div>

                    <!-- Last Login -->
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="bi bi-clock-history"></i>
                        </div>
                        <div>
                            <div class="info-label">Dernière connexion</div>
                            <div class="info-value">
                                {{ user.lastLogin ? (user.lastLogin | date:'dd MMMM yyyy à HH:mm') : 'Jamais connecté'
                                }}
                            </div>
                        </div>
                    </div>

                    <!-- Created At -->
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <div>
                            <div class="info-label">Date de création</div>
                            <div class="info-value">{{ user.createdAt | date:'dd MMMM yyyy' }}</div>
                        </div>
                    </div>

                </div>

            </div>

            <!-- Footer -->
            <div class="modal-footer border-0 px-4 pb-4 pt-0">
                <button type="button"
                    class="btn btn-detail-close w-100 rounded-3 py-2 fw-medium d-flex align-items-center justify-content-center gap-2"
                    (click)="close()">
                    <i class="bi bi-x-lg"></i>
                    <span>Fermer</span>
                </button>
            </div>

            }

        </div>
    </div>
</div>